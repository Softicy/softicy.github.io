(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{11317:function(e,t,n){Promise.resolve().then(n.bind(n,20724))},37869:function(e,t,n){"use strict";n.d(t,{TX:function(){return s},lH:function(){return c},pH:function(){return a},uL:function(){return u},z$:function(){return i}});var r=n(20505);let o="RequiresAdditionalAuthentication";async function a(e,t,n){let o=r.Hv.login.login(e,n);return await (0,r.ET)(o,n,{password:t})}let i=e=>401===e.statusCode&&e.name===o,c=()=>({name:o,statusCode:401});async function s(e,t){let n=r.Hv.login.logout(e);try{await (0,r.ET)(n,e,{accessToken:t})}catch(e){console.log("Error when logging out",e)}}async function u(e,t){let n=r.Hv.login.auth;return await (0,r.ET)(n,t,{accessToken:e})}},84277:function(e,t,n){"use strict";n(43503);var r=n(99976);t.Z=(0,r.$)("ae4a03dbbec3fbf5bbcb75d7b9920d5f17bd6cf9")},88653:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r=(0,n(7653).createContext)({})},99114:function(e,t,n){"use strict";n.d(t,{M8:function(){return c},Wx:function(){return a},d9:function(){return i},nP:function(){return s}});var r=n(20505),o=n(42700);let a="accessToken",i="__returnUrl",c=e=>{e?(0,o.d8)(a,e):(0,o.nJ)(a)},s=e=>{e?r.ZP.defaults.headers.common.authorization="VIAPLAY-AT ".concat(e):delete r.ZP.defaults.headers.common.authorization}},31874:function(e,t,n){"use strict";n.d(t,{ConfigProvider:function(){return i},Z:function(){return c}});var r=n(27573),o=n(7653);n(20505);let a=(0,o.createContext)({config:{overviewAvailable:!1,redeemAvailable:!1,hasPurchaseLock:!1,helpAccountLink:"",footer:[]}}),i=e=>{let{children:t,config:n}=e;return(0,r.jsx)(a.Provider,{value:{config:n},children:t})},c=()=>{let e=(0,o.useContext)(a);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},54122:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var r=n(7653),o=n(88653);let a=()=>{let e=(0,r.useContext)(o.V);if(!e)throw Error("useAuthContext context must be use inside AuthProvider");return e}},63129:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(7653),o=n(5712);let a=()=>{let e=(0,r.useContext)(o.y);if(!e)throw Error("useTranslations context must be use inside TranslationsProvider");return e}},20724:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var r=n(27573),o=n(24924),a=n(96756),i=n(57484),c=n(19449),s=n(20410),u=n(88034),l=n(81387),d=n(9876),f=n(81695),h=n(7653),p=n(37869),v=n(20505);async function g(e){let t=v.Hv.account.users.decrypt(e);return await (0,v.Yn)(t)}var m=n(99114),b=n(31874),x=n(54122),k=n(63129),w=n(18961),C=n(20148),y=n(42700);let j=()=>{{var e;let t=new URLSearchParams(window.location.search);return new URLSearchParams({token:null!==(e=t.get("idToken"))&&void 0!==e?e:""}).toString().split("token=")[1]}};function S(){var e;let{getKey:t}=(0,k.T)(),{config:n}=(0,b.Z)(),v=(0,f.useRouter)(),S=null!==(e=j())&&void 0!==e?e:"",[_,A]=(0,h.useState)(""),[T,Z]=(0,h.useState)(!1),[L,P]=(0,h.useState)(!1),[E,R]=(0,h.useState)(""),[I,F]=(0,h.useState)(!1),[z,D]=(0,h.useState)(""),N=t("Cannot be empty"),$=t("Not a valid e-mail address"),[U,B]=(0,h.useState)(!1),[V,H]=(0,h.useState)(!1),{login:J,authenticated:M}=(0,x.a)(),[O,W]=(0,h.useState)("");(0,h.useEffect)(()=>{(async()=>{if(S){let e=await g(S).catch();R(null!=e?e:"")}P(!0)})()},[S]),(0,h.useEffect)(()=>{if(W(window.location.href),M){let e=(0,y.ej)(m.d9);window.location.assign(null!=e?e:"/")}},[M,v]);let Y=!I&&!T&&!!E&&!!_,X=()=>"".concat(O.replace("account","checkout")),q=e=>{Z(e.length<=0)},G=e=>{F(!C.Fh.test(String(e).toLowerCase())),0===e.length?D(N):D($)},K=async(e,t)=>{if(B(!0),q(t),G(e),!I&&!T)try{await J(e,t)}catch(e){B(!1),(0,p.z$)(e)||H(!0)}},Q=e=>L?e:(0,r.jsx)(o.Skeleton,{width:"100%",borderRadius:6,startColor:"background.2",endColor:"background.2",children:e});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.VStack,{mt:16,children:(0,r.jsx)(i.Container,{variant:"block",children:(0,r.jsxs)(a.VStack,{spacing:6,alignItems:"center",justifyContent:"center",children:[(0,r.jsx)(c.Heading,{size:"md",children:t("Member login")}),(0,r.jsx)(s.Center,{width:{base:"100%",md:"50%"},children:Q((0,r.jsx)(w.t,{labelText:t("Email"),value:E,isValidated:!I,onChangeInput:e=>{R(e.target.value),G(e.target.value)},hasError:I,errorMessage:z,id:"email"}))}),(0,r.jsx)(s.Center,{width:{base:"100%",md:"50%"},children:Q((0,r.jsx)(w.t,{labelText:t("Password"),type:"password",value:_,isValidated:!T,onChangeInput:e=>{A(e.target.value),q(e.target.value)},hasError:T,errorMessage:t("Cannot be empty"),id:"password"}))}),V&&(0,r.jsx)(u.Text,{id:"login-error",color:"others.input-error",children:t("Username and password does not match. Please try again.")}),(0,r.jsx)(l.Button,{id:"login-button","data-testhook":"login-form-submit",isLoading:U,mt:2,isDisabled:!Y,onClick:()=>K(E,_),children:t("login")}),(0,r.jsx)(d.Link,{onClick:()=>v.push("/forgot-password"),children:t("Forgot Password?")}),(0,r.jsx)(d.Link,{mt:6,href:"#",target:"_blank",onClick:e=>{e.preventDefault(),window.location.replace(X())},children:t("Don't have a Viaplay account? Sign up for one here")})]})})}),(0,r.jsx)(a.VStack,{paddingTop:"10vh",children:(0,r.jsx)(d.Link,{mt:6,href:null==n?void 0:n.helpAccountLink,target:"_blank",children:t("Do you need help with your account?")})})]})}},18961:function(e,t,n){"use strict";n.d(t,{t:function(){return m}});var r=n(27573),o=n(7653),a=n(36888),i=n(99169),c=n(40235),s=n(69857),u=n(60644),l=n(6062),d=n(17282),f=n(37155),h=n(77549),p=n(88666),v=n(94341),g=n(7405);function m(e){let{variant:t,type:n="text",labelText:m,errorMessage:b,icon:x,isDisabled:k=!1,hasError:w=!1,isValidated:C=!1,className:y,onChangeInput:j,maxLength:S,minLength:_,id:A,...T}=e,[Z,L]=(0,o.useState)(!1),[P,E]=(0,o.useState)(e.value),[R,I]=(0,o.useState)(!1),F=()=>{L(!Z)};return(0,r.jsx)(c.InputGroup,{children:(0,r.jsxs)(s.FormControl,{...T,id:A,isInvalid:w,variant:"floating",children:[(0,r.jsx)(u.Input,{placeholder:" ",sx:{":-webkit-autofill":{WebkitBoxShadow:"0 0 0px 1000px ".concat(g.colors.background[2]," inset"),WebkitTextFillColor:g.colors.text.light,WebkitBackgroundClip:"text"}},type:Z?"text":n,maxLength:S,minLength:_,isDisabled:k,value:P,onChange:e=>{E(e.target.value),j(e)},onFocus:()=>I(!0),onBlur:()=>I(!1),variant:w?"error":t}),(0,r.jsx)(l.FormLabel,{color:P||R?"others.label-default":"text.main",pt:P||R?0:1,children:m}),(0,r.jsx)(d.FormErrorMessage,{color:"others.input-error",ml:4,children:b}),(0,r.jsxs)(f.InputRightElement,{display:"flex",alignItems:"center",justifyContent:"end",width:"100px",children:[(()=>{if(x)return(0,r.jsx)(i.Box,{mr:3,children:x})})(),"password"===n&&(0,r.jsx)(a.IconButton,{bg:"transparent",_disabled:{bg:"transparent",cursor:"default"},_hover:{bg:"transparent"},"aria-label":"show",onClick:()=>F(),children:Z?(0,r.jsx)(h.X,{}):(0,r.jsx)(p.S,{})}),C&&!w&&""!==P&&(0,r.jsx)(v.nQ,{mr:3})]})]})})}},20505:function(e,t,n){"use strict";n.d(t,{Du:function(){return u},ET:function(){return d},Hv:function(){return f},Mt:function(){return l},Yn:function(){return s},_i:function(){return c}});var r=n(13908),o=n(84277);let a=!1,i=async()=>{if(!a){var e;let t=await (0,o.Z)();r.Z.defaults.baseURL=f.account.base(null!==(e=t.VPC)&&void 0!==e?e:""),r.Z.interceptors.response.use(e=>e,e=>Promise.reject(e)),a=!0}};t.ZP=r.Z;let c=async e=>{await i();let[t,n]=Array.isArray(e)?e:[e];return(await r.Z.get(t,{...n})).data},s=async e=>(await i(),(await r.Z.get(e)).data),u=async(e,t)=>(await i(),(await r.Z.post(e,t)).data),l=async(e,t)=>(await i(),(await r.Z.put(e,t)).data),d=async(e,t,n)=>{var a;let i=await (0,o.Z)(),c="".concat(f.login.base(null!==(a=i.VPC)&&void 0!==a?a:"",t),"/").concat(e);return(await r.Z.post(c,n,{withCredentials:!0}).catch(e=>{if(e.response){var t;throw null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data}throw e})).data},f={translations:{base:e=>"https://".concat(h(e),"viaplay.com/translation-solution/account/").concat(p(e),"/translations.json")},login:{base:(e,t)=>"https://login.".concat("CI"===e?"qa.dev.":h(e),"viaplay.").concat(t,"/api"),login:(e,t)=>"login/v1?username=".concat(e,"&deviceKey=pcdash-").concat(t,"&refresh=true&persistent=true"),logout:e=>"logout/v1?deviceKey=pcdash-".concat(e),auth:"validateAccessToken/v3"},account:{base:e=>v(e),config:"/config",userSettings:"/user-settings",apply:"/contracts/apply",redeem:(e,t,n)=>"/redeem?voucherCode=".concat(e,"&userGuid=").concat(t,"&countryCode=").concat(n),users:{decrypt:e=>"/users/decrypt?token=".concat(e)}},checkout:{base:(e,t)=>"https://checkout.".concat(h(e),"viaplay").concat(t)}},h=e=>{let t=null==e?void 0:e.toLowerCase();return"ci"===t||"dev"===t||"local"===t?"ci.":"stage"===t?"stage.":""},p=e=>{let t=null==e?void 0:e.toLowerCase();return"stage"===t||"prod"===t?"master":"develop"},v=e=>"local"===e.toLowerCase()?"http://localhost:3000":"https://account.".concat(h(e),"mtg-api.com")},20148:function(e,t,n){"use strict";n.d(t,{Fh:function(){return r},Js:function(){return i},lr:function(){return o}});let r=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,o=/^[A-Za-zÀ-ÖØ-öø-ÿ]+$/,a=[/^(?=.*?[a-z])/,/^(?=.*?[A-Z])/,/^(?=.*?[0-9])/,/^(?=.*?[^A-Za-z0-9])/],i=e=>{let t=0;return a.forEach(n=>{n.test(e)&&t++}),t}},42700:function(e,t,n){"use strict";n.d(t,{d8:function(){return a},ej:function(){return o},nJ:function(){return i}});var r=n(26066);let o=e=>r.Z.get(e),a=(e,t)=>r.Z.set(e,t),i=e=>r.Z.remove(e)},81695:function(e,t,n){"use strict";var r=n(21219);n.o(r,"redirect")&&n.d(t,{redirect:function(){return r.redirect}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},86170:function(e,t,n){"use strict";n.d(t,{usePrevious:function(){return o}});var r=n(7653);function o(e){let t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}},20410:function(e,t,n){"use strict";n.d(t,{AbsoluteCenter:function(){return s},Center:function(){return i}});var r=n(27573),o=n(68776),a=n(18778);let i=(0,o.chakra)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});i.displayName="Center";let c={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}},s=(0,a.forwardRef)(function(e,t){let{axis:n="both",...a}=e;return(0,r.jsx)(o.chakra.div,{ref:t,__css:c[n],...a,position:"absolute"})})},9876:function(e,t,n){"use strict";n.d(t,{Link:function(){return u}});var r=n(27573),o=n(5932),a=n(88500),i=n(18778),c=n(64099),s=n(68776);let u=(0,i.forwardRef)(function(e,t){let n=(0,c.useStyleConfig)("Link",e),{className:i,isExternal:u,...l}=(0,o.L)(e);return(0,r.jsx)(s.chakra.a,{target:u?"_blank":void 0,rel:u?"noopener":void 0,ref:t,className:(0,a.cx)("chakra-link",i),...l,__css:n})});u.displayName="Link"},24924:function(e,t,n){"use strict";n.d(t,{Skeleton:function(){return x}});var r=n(27573),o=n(86170),a=n(55003),i=n(5932),c=n(88500),s=n(19017),u=n(7653),l=n(38962),d=n(68776),f=n(18778),h=n(64099);let p=(0,d.chakra)("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),v=(0,a.gJ)("skeleton-start-color"),g=(0,a.gJ)("skeleton-end-color"),m=(0,s.F4)({from:{opacity:0},to:{opacity:1}}),b=(0,s.F4)({from:{borderColor:v.reference,background:v.reference},to:{borderColor:g.reference,background:g.reference}}),x=(0,f.forwardRef)((e,t)=>{let n={...e,fadeDuration:"number"==typeof e.fadeDuration?e.fadeDuration:.4,speed:"number"==typeof e.speed?e.speed:.8},a=(0,h.useStyleConfig)("Skeleton",n),s=function(){let e=(0,u.useRef)(!0);return(0,u.useEffect)(()=>{e.current=!1},[]),e.current}(),{startColor:f="",endColor:x="",isLoaded:k,fadeDuration:w,speed:C,className:y,fitContent:j,animation:S,..._}=(0,i.L)(n),[A,T]=(0,l.useToken)("colors",[f,x]),Z=(0,o.usePrevious)(k),L=(0,c.cx)("chakra-skeleton",y),P={...A&&{[v.variable]:A},...T&&{[g.variable]:T}};if(k){let e=s||Z?"none":"".concat(m," ").concat(w,"s");return(0,r.jsx)(d.chakra.div,{ref:t,className:L,__css:{animation:e},..._})}return(0,r.jsx)(p,{ref:t,className:L,..._,__css:{width:j?"fit-content":void 0,...a,...P,_dark:{...a._dark,...P},animation:S||"".concat(C,"s linear infinite alternate ").concat(b)}})});x.displayName="Skeleton"},88034:function(e,t,n){"use strict";n.d(t,{Text:function(){return l}});var r=n(27573),o=n(5932),a=n(88971),i=n(88500),c=n(18778),s=n(64099),u=n(68776);let l=(0,c.forwardRef)(function(e,t){let n=(0,s.useStyleConfig)("Text",e),{className:c,align:l,decoration:d,casing:f,...h}=(0,o.L)(e),p=(0,a.o)({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,r.jsx)(u.chakra.p,{ref:t,className:(0,i.cx)("chakra-text",e.className),...p,...h,__css:n})});l.displayName="Text"},55003:function(e,t,n){"use strict";function r(e,t,n){let r=function(e,t=""){var n;return((n=function(e,t="-"){return e.replace(/\s+/g,t)}(`--${(function(e,t=""){return[t,e].filter(Boolean).join("-")})(e,t)}`.toString())).includes("\\.")?n:Number.isInteger(parseFloat(n.toString()))?n:n.replace(".","\\.")).replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(e,n);return{variable:r,reference:`var(${r}${t?`, ${t}`:""})`}}function o(e,t){let n={};for(let o of t){if(Array.isArray(o)){let[t,a]=o;n[t]=r(`${e}-${t}`,a);continue}n[o]=r(`${e}-${o}`)}return n}n.d(t,{_6:function(){return o},gJ:function(){return r}})},26066:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{Z:function(){return o}});var o=function e(t,n){function o(e,o,a){if("undefined"!=typeof document){"number"==typeof(a=r({},n,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var c in a)a[c]&&(i+="; "+c,!0!==a[c]&&(i+="="+a[c].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),i=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(r[c]=t.read(i,c),e===c)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){o(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[689,242,61,553,607,293,528,744],function(){return e(e.s=11317)}),_N_E=e.O()}]);